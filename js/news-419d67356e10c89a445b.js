(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"9GeW":function(t,e,n){},"9vjL":function(t,e,n){"use strict";var i=n("U11c"),s=n.n(i);s.a},A7HW:function(t,e,n){},CkNg:function(t,e,n){"use strict";var i=n("qRd6"),s=n.n(i);s.a},EmP9:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p-news-search"},[n("header",{staticClass:"m-box m-aln-center m-pos-f m-main m-bb1 m-head-top"},[n("div",{staticClass:"m-box m-flex-grow2 m-flex-shrink2 m-aln-center m-head-top-title"},[n("div",{staticClass:"m-search-box"},[n("form",{attrs:{action:"#",onsubmit:"return false"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.keywordOrigin,expression:"keywordOrigin"}],attrs:{type:"search",placeholder:"搜索"},domProps:{value:t.keywordOrigin},on:{input:[function(e){e.target.composing||(t.keywordOrigin=e.target.value)},t.searchNewsByKey]}})])])]),n("div",{staticClass:"m-box m-flex-grow0 m-flex-shrink0 m-aln-center m-justify-end"},[n("a",{on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.goBack(e)}}},[t._v("取消")])])]),n("jo-load-more",{ref:"loadmore",staticStyle:{"padding-top":"0.9rem"},attrs:{"auto-load":!1,"show-bottom":t.list.length>0},on:{onLoadMore:t.onLoadMore}},t._l(t.list,function(e){return e.id?n("news-card",{key:e.id,attrs:{news:e}}):t._e()})),n("p",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"load-more-ph m-text-c mt10"},[t._v("正在搜索...")]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.noResult&&!t.loading&&t.keyword&&!t.list.length,expression:"noResult && !loading && keyword && !list.length"}],staticClass:"placeholder m-no-find"})],1)},s=[],r=n("iv4g"),a=n("LvDl"),o=n.n(a),c=n("ZzYY"),u=n("qiqU"),l=n("TsPW"),f={name:"NewsSearch",components:{NewsCard:c["a"]},data:function(){return{keywordOrigin:"",list:[],loading:!1,noResult:!1}},computed:{after:function(){var t=this.list.length;return t>0?this.list[t-1].id:0},keyword:function(){return this.keywordOrigin.trim()}},methods:{searchNewsByKey:o.a.debounce(function(){var t=this;this.keyword&&(this.loading=!0,Object(u["l"])(this.keyword).then(function(e){var n=e.data;t.loading=!1,t.list=n,t.$refs.loadmore.afterRefresh(n.length<l["c"]),n.length||(t.noResult=!0)}))},600),onLoadMore:function(){var t=this;Object(u["l"])(this.keyword,l["c"],this.after).then(function(e){var n=e.data;t.list=Object(r["a"])(t.list).concat(Object(r["a"])(n)),t.$refs.loadmore.afterLoadmore(n.length<l["c"])})}}},h=f,d=(n("vmUk"),n("jce9"),n("KHd+")),m=Object(d["a"])(h,i,s,!1,null,"4338960d",null);e["default"]=m.exports},INYr:function(t,e,n){"use strict";var i=n("XKFU"),s=n("CkkT")(6),r="findIndex",a=!0;r in[]&&Array(1)[r](function(){a=!1}),i(i.P+i.F*a,"Array",{findIndex:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),n("nGyu")(r)},KoEA:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"c-banner-advertisement"},[t.list.length?n("swipe",{staticClass:"banner-swipe",attrs:{"autoplay-time":t.loopTime}},t._l(t.list,function(e){return n("swipe-item",{key:e.id},[n("a",{staticClass:"wrap",attrs:{href:e.data.link}},[n("img",{staticClass:"ad",attrs:{src:e.data.image}}),n("h4",{staticClass:"title"},[t._v(t._s(e.title))])])])})):t._e()],1)},s=[],r=(n("Vd3H"),n("xfY5"),n("rGqo"),n("RW0V"),n("Z2Ku"),n("L9s1"),n("A7HW"),n("WSVa")),a=n("FkfR"),o={"feed:hot":"feed:list:top",news:"news:list:top"},c={name:"BannerAd",components:{Swipe:r["Swipe"],SwipeItem:r["SwipeItem"]},props:{type:{type:String,required:!0,validator:function(t){return Object.keys(o).includes(t)}},loopTime:{type:Number,default:3e3}},data:function(){return{list:[]}},computed:{adTypeId:function(){var t=this.$store.getters.getAdTypeBySpace(o[this.type]);return t.id}},mounted:function(){this.fetchList()},methods:{fetchList:function(){var t=this;a["a"](this.adTypeId).then(function(e){var n=e.data;t.list=n.sort(function(t,e){return t.sort<e.sort})})}}},u=c,l=(n("CkNg"),n("KHd+")),f=Object(l["a"])(u,i,s,!1,null,"29b8a917",null);e["a"]=f.exports},RDt0:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p-news"},[n("header",{staticClass:"m-box m-pos-f m-main m-bb1 m-head-top"},[n("div",{staticClass:"m-box m-aln-center m-flex-grow1 m-flex-base0"},[n("svg",{staticClass:"m-style-svg m-svg-def",on:{click:t.goBack}},[n("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#base-back"}})])]),t._m(0),n("div",{staticClass:"m-box m-aln-center m-flex-grow1 m-flex-base0 m-justify-end"},[n("router-link",{staticClass:"m-style-svg m-svg-def",attrs:{append:"",tag:"svg",to:"search"}},[n("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#base-search"}})]),n("svg",{staticClass:"m-style-svg m-svg-def",on:{click:t.beforeCreatePost}},[n("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#post-news"}})])],1)]),n("news-filter",{on:{change:t.onCateChange}}),n("jo-load-more",{ref:"loadmore",staticClass:"p-news--body",on:{onRefresh:t.onRefresh,onLoadMore:t.onLoadMore}},[n("banner-ad",{attrs:{type:"news"}}),t._l(t.list,function(e){return[e.author?n("news-card",{key:"news"+e.id,attrs:{"current-cate":t.currentCate,news:e}}):t._e(),e.space_id?n("ad-card",{key:"ad"+e.id,attrs:{ad:e}}):t._e()]})],2)],1)},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"m-box m-aln-center m-flex-grow1 m-flex-base0 m-justify-center m-head-top-title"},[n("span",[t._v("资讯")])])}],r=n("iv4g"),a=n("9e9m"),o=n("LvDl"),c=n.n(o),u=n("ZzYY"),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a",{staticClass:"news-card",attrs:{href:t.ad.data.link}},[n("section",{staticClass:"body"},[n("h2",[t._v(t._s(t.ad.data.title))]),n("p",[n("i",{staticClass:"news-cate"},[t._v("广告")]),n("span",[t._v(t._s(t._f("formatDate")(t.ad.data.time,"MM-dd")))])])]),t.ad.data.image?n("div",{staticClass:"poster"},[n("img",{attrs:{src:t.ad.data.image}})]):t._e()])},f=[],h={name:"AdCard",extends:u["a"],props:{ad:{type:Object,required:!0}},methods:{formatData:function(){}}},d=h,m=n("KHd+"),p=Object(m["a"])(d,l,f,!1,null,null,null),v=p.exports,w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:[t.prefixCls,{showAll:t.showAll}]},[n("div",{class:t.prefixCls+"--head"},[n("span",[t._v("点击以编辑")]),n("div",[n("button",{on:{click:t.onOk}},[t._v(t._s(t.editing?"完成":"编辑"))]),n("button",{on:{click:t.showEditor}},[t._v("收起")])])]),n("div",{class:t.prefixCls+"--list__wrap"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.showAll,expression:"!showAll"}],class:t.prefixCls+"--switch",on:{click:t.showEditor}},[n("svg",[n("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#base-arrow-r"}})])]),n("span",{class:t.prefixCls+"--list__label"},[t._v("我的订阅")]),n("div",{class:[t.prefixCls+"--list",{editing:t.editing}]},[n("div",{class:[t.prefixCls+"--list__item",{active:0===~~t.currentCate.id}],on:{click:function(e){t.chooseCate(e,{id:0,name:"推荐"})}}},[t._v("推荐")]),t._l(t.myCates,function(e){return n("div",{key:"myCate-"+e.id,class:[t.prefixCls+"--list__item",{active:e.id===t.currentCate.id}],on:{click:function(n){t.chooseCate(n,e)}}},[t._v(t._s(e.name))])})],2)]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showAll,expression:"showAll"}],class:t.prefixCls+"--list__wrap"},[n("span",{class:t.prefixCls+"--list__label"},[t._v("更多订阅")]),n("div",{class:t.prefixCls+"--list"},t._l(t.moreCates,function(e){return n("div",{key:"moreCate-"+e.id,class:[t.prefixCls+"--list__item"],on:{click:function(n){t.chooseCate(n,e)}}},[t._v(t._s(e.name))])}))])])},g=[],y=(n("ls82"),n("MECJ")),x=n("yT7P"),C=(n("INYr"),"news__filter"),_={name:"NewsFilter",data:function(){return{prefixCls:C,editing:!1,showAll:!1,myCates:[],moreCates:[],currentCate:{id:0,name:"推荐"}}},watch:{editing:function(){},showAll:function(t){!t&&(this.editing=!1)}},mounted:function(){this.fetchCates()},methods:{showEditor:function(){this.showAll=!this.showAll},onOk:function(){if(this.editing){this.editing=!1;var t=this.myCates.map(function(t){return t.id}).join(",");this.$http.patch("/news/categories/follows",{follows:t}),this.showAll=!1,this.$emit("onOk",this.myCates)}else this.editing=!0},chooseCate:function(t,e){if(this.showAll)if(this.editing){var n=this.myCates.findIndex(function(t){return t.id===e.id});if(n>-1)this.moreCates.push(e),this.myCates.splice(n,1);else{var i=this.moreCates.findIndex(function(t){return t.id===e.id});this.myCates.push(e),this.moreCates.splice(i,1)}}else this.editing=!0;else if(e.id!==this.currentCate.id){var s=t.target;this.currentCate=Object(x["a"])({},e,{el:s}),this.$emit("change",this.currentCate)}},fetchCates:function(){var t=Object(y["a"])(regeneratorRuntime.mark(function t(){var e,n,i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get("/news/cates");case 2:e=t.sent,n=e.data,n=void 0===n?{}:n,i=n.my_cates,s=n.more_cates,this.myCates=i?Object(r["a"])(i):[],this.moreCates=s?Object(r["a"])(s):[];case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}},b=_,k=(n("TBF6"),Object(m["a"])(b,w,g,!1,null,"4dee4531",null)),T=k.exports,O=n("KoEA"),j=n("FkfR"),I=function(){},$={name:"NewsList",components:{NewsCard:u["a"],AdCard:v,NewsFilter:T,BannerAd:O["a"]},data:function(){return{list:[],currentCate:0,newsList:[],advertiseList:[],advertiseLeft:[]}},computed:{after:function(){var t=this.list.length;return t>0?this.list[t-1].id:0},advertiseTypeId:function(){var t=this.$store.getters.getAdTypeBySpace("news:list:analog");return t.id}},mounted:function(){this.getAdvertiseList()},methods:{onCateChange:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,n=void 0===e?0:e;this.newsList=[],this.currentCate=n,this.onRefresh(I)},onRefresh:function(t){var e=this,n=0===this.currentCate?{limit:10,recommend:1}:{limit:10,cate_id:this.currentCate};this.$http.get("/news",{params:n}).then(function(n){var i=n.data,s=void 0===i?[]:i;e.newsList=s,t(s.length>=10);var r=1+~~(9*Math.random());r>s.length&&(r=s.length),e.advertiseLeft=c.a.cloneDeep(e.advertiseList),e.advertiseLeft.length&&s.splice(r,0,e.advertiseLeft.shift()),e.list=s})},onLoadMore:function(t){var e=this,n=0===this.currentCate?{limit:10,recommend:1,after:this.after}:{limit:10,cate_id:this.currentCate,after:this.after};this.$http.get("/news",{params:n}).then(function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.data,s=void 0===i?[]:i;t(s.length<10);var a=1+~~(9*Math.random());a>s.length&&(a=s.length),e.advertiseLeft.length&&s.splice(a,0,e.advertiseLeft.shift()),e.list=Object(r["a"])(e.list).concat(Object(r["a"])(s))})},beforeCreatePost:function(){var t=this,e=!this.$store.state.CONFIG["news:contribute"].verified||!c.a.isEmpty(this.$store.state.CURRENTUSER.verified);if(e)return this.$router.push({path:"/post/release"});var n=[{text:"个人认证",method:function(){return t.$router.push({path:"/profile/certificate",query:{type:"user"}})}},{text:"企业认证",method:function(){return t.$router.push({path:"/profile/certificate",query:{type:"org"}})}}];a["a"].$emit("actionSheet",n,"取消","认证用户才能创建投稿，去认证？")},getAdvertiseList:function(){var t=this;j["a"](this.advertiseTypeId).then(function(e){var n=e.data;t.advertiseList=n,t.advertiseLeft=c.a.cloneDeep(n)})}}},M=$,S=(n("9vjL"),Object(m["a"])(M,i,s,!1,null,"76087319",null));e["default"]=S.exports},TBF6:function(t,e,n){"use strict";var i=n("lnwd"),s=n.n(i);s.a},U11c:function(t,e,n){},WSVa:function(t,e,n){!function(e,n){t.exports=n()}(0,function(){return function(t){function e(i){if(n[i])return n[i].exports;var s=n[i]={exports:{},id:i,loaded:!1};return t[i].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.SwipeItem=e.Swipe=void 0;var s=n(60),r=i(s),a=n(59),o=i(a);e.Swipe=r.default,e.SwipeItem=o.default,e.default={Swipe:r.default,SwipeItem:o.default}},function(t,e,n){var i=n(23)("wks"),s=n(27),r=n(2).Symbol,a="function"==typeof r,o=t.exports=function(t){return i[t]||(i[t]=a&&r[t]||(a?r:s)("Symbol."+t))};o.store=i},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){var i=n(10);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},function(t,e){var n=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=n)},function(t,e,n){t.exports=!n(20)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var i=n(8),s=n(12);t.exports=n(5)?function(t,e,n){return i.f(t,e,s(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var i=n(3),s=n(39),r=n(54),a=Object.defineProperty;e.f=n(5)?Object.defineProperty:function(t,e,n){if(i(t),e=r(e,!0),i(n),s)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){t.exports={}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var i=n(23)("keys"),s=n(27);t.exports=function(t){return i[t]||(i[t]=s(t))}},function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var i=n(34);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,s){return t.call(e,n,i,s)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var i=n(10),s=n(2).document,r=i(s)&&i(s.createElement);t.exports=function(t){return r?s.createElement(t):{}}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var i=n(2),s=n(4),r=n(16),a=n(7),o=n(6),c="prototype",u=function(t,e,n){var l,f,h,d=t&u.F,m=t&u.G,p=t&u.S,v=t&u.P,w=t&u.B,g=t&u.W,y=m?s:s[e]||(s[e]={}),x=y[c],C=m?i:p?i[e]:(i[e]||{})[c];for(l in m&&(n=e),n)f=!d&&C&&void 0!==C[l],f&&o(y,l)||(h=f?C[l]:n[l],y[l]=m&&"function"!=typeof C[l]?n[l]:w&&f?r(h,i):g&&C[l]==h?function(t){var e=function(e,n,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,i)}return t.apply(this,arguments)};return e[c]=t[c],e}(h):v&&"function"==typeof h?r(Function.call,h):h,v&&((y.virtual||(y.virtual={}))[l]=h,t&u.R&&x&&!x[l]&&a(x,l,h)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){t.exports=!0},function(t,e,n){var i=n(8).f,s=n(6),r=n(1)("toStringTag");t.exports=function(t,e,n){t&&!s(t=n?t:t.prototype,r)&&i(t,r,{configurable:!0,value:e})}},function(t,e,n){var i=n(4),s=n(2),r="__core-js_shared__",a=s[r]||(s[r]={});(t.exports=function(t,e){return a[t]||(a[t]=void 0!==e?e:{})})("versions",[]).push({version:i.version,mode:n(21)?"pure":"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})},function(t,e,n){var i=n(40),s=n(9);t.exports=function(t){return i(s(t))}},function(t,e,n){var i=n(14),s=Math.min;t.exports=function(t){return t>0?s(i(t),9007199254740991):0}},function(t,e,n){var i=n(9);t.exports=function(t){return Object(i(t))}},function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},function(t,e){t.exports=function(t,e,n,i){var s,r=t=t||{},a=typeof t.default;"object"!==a&&"function"!==a||(s=t,r=t.default);var o="function"==typeof r?r.options:r;if(e&&(o.render=e.render,o.staticRenderFns=e.staticRenderFns),n&&(o._scopeId=n),i){var c=o.computed||(o.computed={});Object.keys(i).forEach(function(t){var e=i[t];c[t]=function(){return e}})}return{esModule:s,exports:r,options:o}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"swipe-item",mounted:function(){this.$parent.init()}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(32),r=i(s);e.default={name:"swipe",data:function(){return{hasMounted:!1,insideValue:this.value,pages:[],width:0,length:0,inited:!1,startx:0,moveDistance:0,touchStartTime:0,moving:!1,starty:0,firstMove:!0,horizontalMove:!0,copyNum:2,autoplayTimer:null}},props:{value:{type:Number,default:0},pagination:{type:Boolean,default:!0},autoplayTime:{type:Number,default:0},loop:{type:Boolean,default:!0},minMoveDistance:{type:String,default:"20%"},quickTouchTime:{type:Number,default:150},speed:{type:Number,default:300}},computed:{c_minMoveDistance:function(t){var e=t,n="";/px$/.test(t)?n="pixel":/^\d+$/.test(t)?n="pixel":/%$/.test(t)?n="percent":(e="20%",n="percent");var i={pixel:function(){return parseInt(e,10),e+"px"},percent:function(){var t=parseInt(e,10)/100;return this.width*t}};return i[n].apply(this)},c_translatex:function(){return-this.width*this.insideValue},c_isEnd:function(){return this.insideValue===this.length-1},c_isBegin:function(){return 0===this.insideValue}},watch:{insideValue:function(t){t!==this.value&&this.$emit("input",t),this.valueChangeHandler(t)},value:function(t){this.insideValue=t},autoplayTime:function(){this.autoChange()}},mounted:function(){this.hasMounted=!0,this.init(),this.initOnce()},destroyed:function(){clearTimeout(this.autoplayTimer)},methods:{reset:function(){this.init(),this.initOnce()},init:function(){if(this.hasMounted){var t=this.initDatas();t&&(this.$refs.wrapper.style.width=this.width+"px",this.clearCopies(),this.addCopies(),this.autoplayTime>0&&this.autoChange())}},initOnce:function(){this.setTranslate(this.c_translatex)},initDatas:function(){var t=getComputedStyle(this.$el,!1).width;return this.width=parseInt(t,10),!!this.$slots.default&&(this.pages=this.$slots.default.filter(function(t){return t.tag&&t.elm.classList.contains("c-swipe-item")}).map(function(t){return t.elm}),!!this.pages.length&&(this.length=this.pages.length,!0))},clearCopies:function(){var t=this,e=this.$refs.wrapper.querySelectorAll(".c-swipe-item-copy");[].concat((0,r.default)(e)).forEach(function(e){t.$refs.wrapper.removeChild(e)},this),this.$refs.wrapper.style.marginLeft="0"},addCopies:function(){var t=this,e=[],n=[];for(this.pages.forEach(function(i,s){if(s<2){var r=i.cloneNode(!0);r.classList.add("c-swipe-item-copy"),e.push(r)}if(s>t.pages.length-3){var a=i.cloneNode(!0);a.classList.add("c-swipe-item-copy"),n.push(a)}},this),this.copyNum=n.length;n.length;){var i=n.pop(),s=this.$refs.wrapper.querySelector(".c-swipe-item");this.$refs.wrapper.insertBefore(i,s)}for(;e.length;){var r=e.shift();this.$refs.wrapper.appendChild(r)}this.$refs.wrapper.style.marginLeft="-"+this.width*this.copyNum+"px"},handleTouchstart:function(t){this.length<=1||this.moving||(this.startx=t.touches[0].pageX,this.starty=t.touches[0].pageY,this.touchStartTime=(new Date).getTime(),this.autoChange&&this.autoChange(),this.firstMove=!0)},handleTouchmove:function(t){if(!(this.length<=1||this.moving)){if(this.moveDistance=t.touches[0].pageX-this.startx,this.firstMove){this.firstMove=!1;var e=t.touches[0].pageY-this.starty;this.horizontalMove=Math.abs(this.moveDistance)>=Math.abs(e)}if(this.horizontalMove){t.preventDefault();var n=this.c_translatex+this.moveDistance,i=n;i=this.handleTouchmove_loop(n),this.setTranslate(i)}}},handleTouchend:function(t){if(!(this.length<=1||this.moving)&&this.horizontalMove){var e=(new Date).getTime()-this.touchStartTime<this.quickTouchTime;this.loop?this.handleTouchend_loop(this.cartChange(this.moveDistance,e)):this.updateInsideValue(this.cartChange(this.moveDistance,e)),this.moveDistance=0}},handleTouchmove_loop:function(t){if(this.loop)return t;var e=0,n=-this.width*(this.length-1);return t>e?e:t<n?n:t},handleTouchend_loop:function(t){var e=this;if(this.loop){var n=this.insideValue+t;return 0===this.insideValue&&n<this.insideValue?(this.setTranslate(-this.width*this.length+this.moveDistance),void setTimeout(function(){e.updateInsideValue(t)},40)):this.insideValue===this.length-1&&n>this.insideValue?(this.setTranslate(this.width+this.moveDistance),void setTimeout(function(){e.updateInsideValue(t)},40)):void this.updateInsideValue(t)}},updateInsideValue:function(t){var e=this;if(0!==t){var n=this.insideValue+t,i=this.chain(this.updateInsideValue_loop,this.updateInsideValue_normal,function(t){e.insideValue=t});i(n)}else this.valueChangeHandler(t)},updateInsideValue_loop:function(t){return!!this.loop&&(t<0?(this.insideValue=this.length-1,"done"):t>this.length-1&&(this.insideValue=0,"done"))},updateInsideValue_normal:function(t){return t<0?(this.insideValue=0,this.valueChangeHandler(0),"done"):t>this.length-1&&(this.insideValue=this.length-1,this.valueChangeHandler(this.length-1),"done")},cartChange:function(t,e){var n=Math.abs(t),i=Math.abs(this.c_minMoveDistance),s={normal:function(){return n<i?0:t>0?-1:t<0?1:0},quick:function(){return n<10?0:t>0?-1:t<0?1:0}},r="normal";switch(!0){case!0===e:r="quick";break;default:r="normal"}return s[r].apply(this)},valueChangeHandler:function(t){this.duration(),this.setTranslate(this.c_translatex)},autoChange:function(){var t=this;clearTimeout(this.autoplayTimer);var e=function e(){"number"!=typeof t.autoplayTime||t.autoplayTime<=0||t.length<=1||(t.autoplayTimer=setTimeout(function(){t.autoChangeHandler(),e()},t.autoplayTime))};e()},autoChangeHandler:function(){var t=this;this.c_isEnd&&this.setTranslate(this.width),setTimeout(function(){t.insideValue=t.insideValue<t.length-1?t.insideValue+1:0},40)},setTranslate:function(t){function e(t){this.$refs.wrapper.style.transform="translate3d("+t+"px, 0, 0)",this.$refs.wrapper.style.transform="webkikTranslate3d("+t+"px, 0, 0)"}function n(t,e){this.$refs.wrapper.style.webkitTransform="translate3d("+e+"px, 0, 0)",this.$refs.wrapper.style.webkitTransform="webkitTranslate3d("+e+"px, 0, 0)"}"transform"in document.documentElement.style?(this.setTranslate=e,this.setTranslate(t)):(this.setTranslate=n,this.setTranslate(t))},duration:function(){var t=this;this.moving=!0;var e=this.$refs.wrapper,n=this.speed;e.style.transitionDuration=n+"ms",e.style.webkitTransitionDuration=n+"ms",e.style.transitionTimingFunction="ease-out",e.style.webkitTransitionTimingFunction="ease-out",clearTimeout(this.durationTimer),this.durationTimer=setTimeout(function(){e.style.transitionDuration="",e.style.webkitTransitionDuration="",t.moving=!1},n)},chain:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(){for(var t=0;t<e.length;t+=1){var n=e[t].apply(e,arguments);if("done"===n)break}}}}}},function(t,e,n){t.exports={default:n(33),__esModule:!0}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var s=n(31),r=i(s);e.default=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return(0,r.default)(t)}},function(t,e,n){n(57),n(56),t.exports=n(4).Array.from},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var i=n(24),s=n(25),r=n(53);t.exports=function(t){return function(e,n,a){var o,c=i(e),u=s(c.length),l=r(a,u);if(t&&n!=n){for(;u>l;)if(o=c[l++],o!=o)return!0}else for(;u>l;l++)if((t||l in c)&&c[l]===n)return t||l||0;return!t&&-1}}},function(t,e,n){var i=n(15),s=n(1)("toStringTag"),r="Arguments"==i(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,o;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=a(e=Object(t),s))?n:r?i(e):"Object"==(o=i(e))&&"function"==typeof e.callee?"Arguments":o}},function(t,e,n){"use strict";var i=n(8),s=n(12);t.exports=function(t,e,n){e in t?i.f(t,e,s(0,n)):t[e]=n}},function(t,e,n){var i=n(2).document;t.exports=i&&i.documentElement},function(t,e,n){t.exports=!n(5)&&!n(20)(function(){return 7!=Object.defineProperty(n(17)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var i=n(15);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},function(t,e,n){var i=n(11),s=n(1)("iterator"),r=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||r[s]===t)}},function(t,e,n){var i=n(3);t.exports=function(t,e,n,s){try{return s?e(i(n)[0],n[1]):e(n)}catch(e){var r=t.return;throw void 0!==r&&i(r.call(t)),e}}},function(t,e,n){"use strict";var i=n(46),s=n(12),r=n(22),a={};n(7)(a,n(1)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=i(a,{next:s(1,n)}),r(t,e+" Iterator")}},function(t,e,n){"use strict";var i=n(21),s=n(19),r=n(51),a=n(7),o=n(11),c=n(43),u=n(22),l=n(48),f=n(1)("iterator"),h=!([].keys&&"next"in[].keys()),d="@@iterator",m="keys",p="values",v=function(){return this};t.exports=function(t,e,n,w,g,y,x){c(n,e,w);var C,_,b,k=function(t){if(!h&&t in I)return I[t];switch(t){case m:return function(){return new n(this,t)};case p:return function(){return new n(this,t)}}return function(){return new n(this,t)}},T=e+" Iterator",O=g==p,j=!1,I=t.prototype,$=I[f]||I[d]||g&&I[g],M=$||k(g),S=g?O?k("entries"):M:void 0,N="Array"==e&&I.entries||$;if(N&&(b=l(N.call(new t)),b!==Object.prototype&&b.next&&(u(b,T,!0),i||"function"==typeof b[f]||a(b,f,v))),O&&$&&$.name!==p&&(j=!0,M=function(){return $.call(this)}),i&&!x||!h&&!j&&I[f]||a(I,f,M),o[e]=M,o[T]=v,g)if(C={values:O?M:k(p),keys:y?M:k(m),entries:S},x)for(_ in C)_ in I||r(I,_,C[_]);else s(s.P+s.F*(h||j),e,C);return C}},function(t,e,n){var i=n(1)("iterator"),s=!1;try{var r=[7][i]();r.return=function(){s=!0},Array.from(r,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!s)return!1;var n=!1;try{var r=[7],a=r[i]();a.next=function(){return{done:n=!0}},r[i]=function(){return a},t(r)}catch(t){}return n}},function(t,e,n){var i=n(3),s=n(47),r=n(18),a=n(13)("IE_PROTO"),o=function(){},c="prototype",u=function(){var t,e=n(17)("iframe"),i=r.length,s="<",a=">";for(e.style.display="none",n(38).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(s+"script"+a+"document.F=Object"+s+"/script"+a),t.close(),u=t.F;i--;)delete u[c][r[i]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(o[c]=i(t),n=new o,o[c]=null,n[a]=t):n=u(),void 0===e?n:s(n,e)}},function(t,e,n){var i=n(8),s=n(3),r=n(50);t.exports=n(5)?Object.defineProperties:function(t,e){s(t);for(var n,a=r(e),o=a.length,c=0;o>c;)i.f(t,n=a[c++],e[n]);return t}},function(t,e,n){var i=n(6),s=n(26),r=n(13)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=s(t),i(t,r)?t[r]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){var i=n(6),s=n(24),r=n(35)(!1),a=n(13)("IE_PROTO");t.exports=function(t,e){var n,o=s(t),c=0,u=[];for(n in o)n!=a&&i(o,n)&&u.push(n);for(;e.length>c;)i(o,n=e[c++])&&(~r(u,n)||u.push(n));return u}},function(t,e,n){var i=n(49),s=n(18);t.exports=Object.keys||function(t){return i(t,s)}},function(t,e,n){t.exports=n(7)},function(t,e,n){var i=n(14),s=n(9);t.exports=function(t){return function(e,n){var r,a,o=String(s(e)),c=i(n),u=o.length;return c<0||c>=u?t?"":void 0:(r=o.charCodeAt(c),r<55296||r>56319||c+1===u||(a=o.charCodeAt(c+1))<56320||a>57343?t?o.charAt(c):r:t?o.slice(c,c+2):a-56320+(r-55296<<10)+65536)}}},function(t,e,n){var i=n(14),s=Math.max,r=Math.min;t.exports=function(t,e){return t=i(t),t<0?s(t+e,0):r(t,e)}},function(t,e,n){var i=n(10);t.exports=function(t,e){if(!i(t))return t;var n,s;if(e&&"function"==typeof(n=t.toString)&&!i(s=n.call(t)))return s;if("function"==typeof(n=t.valueOf)&&!i(s=n.call(t)))return s;if(!e&&"function"==typeof(n=t.toString)&&!i(s=n.call(t)))return s;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var i=n(36),s=n(1)("iterator"),r=n(11);t.exports=n(4).getIteratorMethod=function(t){if(void 0!=t)return t[s]||t["@@iterator"]||r[i(t)]}},function(t,e,n){"use strict";var i=n(16),s=n(19),r=n(26),a=n(42),o=n(41),c=n(25),u=n(37),l=n(55);s(s.S+s.F*!n(45)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,s,f,h=r(t),d="function"==typeof this?this:Array,m=arguments.length,p=m>1?arguments[1]:void 0,v=void 0!==p,w=0,g=l(h);if(v&&(p=i(p,m>2?arguments[2]:void 0,2)),void 0==g||d==Array&&o(g))for(e=c(h.length),n=new d(e);e>w;w++)u(n,w,v?p(h[w],w):h[w]);else for(f=g.call(h),n=new d;!(s=f.next()).done;w++)u(n,w,v?a(f,p,[s.value,w],!0):s.value);return n.length=w,n}})},function(t,e,n){"use strict";var i=n(52)(!0);n(44)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e){},function(t,e,n){var i=n(28)(n(29),n(62),null,null);t.exports=i.exports},function(t,e,n){n(58);var i=n(28)(n(30),n(61),null,null);t.exports=i.exports},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"c-swipe",on:{touchstart:t.handleTouchstart,touchmove:t.handleTouchmove,touchend:t.handleTouchend,touchcancel:t.handleTouchend}},[n("div",{ref:"wrapper",staticClass:"c-swipe-wrapper"},[t._t("default")],2),t._v(" "),t.pagination?n("div",{staticClass:"c-swipe-pagination"},[n("div",{staticClass:"c-swipe-pagination-bar"},t._l(t.length,function(e){return n("i",{key:e,class:["c-swipe-pagination-item",e-1===t.insideValue?"active":""]})}))]):t._e()])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"c-swipe-item"},[t._t("default")],2)},staticRenderFns:[]}}])})},ixmb:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article-card",{attrs:{liked:t.liked,loading:t.loading,"can-oprate":0===t.news.audit_status},on:{"on-like":t.likeNews,"on-share":t.shareNews,"on-more":t.moreAction,"on-comment":t.commentNews}},[n("header",{staticClass:"m-box m-justify-bet m-aln-center m-art-head",staticStyle:{padding:"0"},attrs:{slot:"head"},slot:"head"},[n("div",{staticClass:"m-box m-flex-grow1 m-aln-center m-flex-base0"},[n("svg",{staticClass:"m-style-svg m-svg-def",on:{click:t.goBack}},[n("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#base-back"}})])]),n("div",{staticClass:"m-box m-flex-grow1 m-aln-center m-flex-base0 m-head-top-title m-text-cut"},[t._v("\n      资讯详情\n    ")]),n("div",{staticClass:"m-box m-flex-grow1 m-aln-center m-flex-base0 m-justify-end"})]),n("jo-load-more",{ref:"loadmore",attrs:{"auto-load":!1,"show-bottom":!1},on:{onRefresh:t.onRefresh}},[n("div",{staticClass:"m-flex-shrink1 m-flex-grow1 m-art m-main"},[n("section",{staticClass:"m-art-head"},[n("h1",[t._v(t._s(t.news.title))]),n("p",[n("i",{staticClass:"m-art-cate"},[t._v(t._s(t.cate))]),n("span",[t._v("来自 "+t._s(t.news.from||"原创"))])])]),t.news.subject?n("p",{staticClass:"m-art-subject"},[t._v(t._s(t.news.subject))]):t._e(),n("div",{staticClass:"m-art-body",domProps:{innerHTML:t._s(t.body)}}),n("div",{staticClass:"m-box m-aln-center m-justify-bet m-art-foot"},[n("div",{staticClass:"m-flex-grow1 m-flex-shrink1 m-box m-aln-center m-art-like-list"},[t.likeCount>0&&0===t.news.audit_status?[n("ul",{staticClass:"m-box m-flex-grow0 m-flex-shrink0"},t._l(t.likes.slice(0,5),function(t,e){var i=t.user,s=t.id;return n("li",{key:s,staticClass:"m-avatar-box tiny",style:{zIndex:5-e}},[n("img",{attrs:{src:i.avatar}})])})),n("span",[t._v(t._s(t._f("formatNum")(t.likeCount))+"人点赞")])]:t._e()],2),n("div",{staticClass:"m-box-model m-aln-end m-art-info"},[n("span",[t._v("发布于"+t._s(t._f("time2tips")(t.time)))]),n("span",[t._v(t._s(t._f("formatNum")(t.news.hits||0))+"浏览")])])]),n("div",{staticClass:"m-box-model m-box-center m-box-center-a m-art-reward"},[n("button",{staticClass:"m-art-rew-btn",on:{click:t.rewardNews}},[t._v("打 赏")]),n("p",{staticClass:"m-art-rew-label"},[n("a",{attrs:{href:"javascript:;"}},[t._v(t._s(t._f("formatNum")(t.reward.count)))]),t._v("人打赏，共\n          "),n("a",{attrs:{href:"javascript:;"}},[t._v(t._s(t._f("formatNum")(~~t.reward.amount)))]),t._v("积分\n        ")]),n("router-link",{staticClass:"m-box m-aln-center m-art-rew-list",attrs:{tag:"ul",to:"rewarders",append:""}},[t._l(t.rewardList,function(t){return n("li",{key:t.id,staticClass:"m-flex-grow0 m-flex-shrink0 m-art-rew m-avatar-box tiny",class:"m-avatar-box-"+t.user.sex},[n("img",{attrs:{src:t.user.avatar}})])}),t.rewardList.length>0?n("li",{staticClass:"m-box m-aln-center"},[n("svg",{staticClass:"m-style-svg m-svg-def",staticStyle:{fill:"#bfbfbf"}},[n("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#base-arrow-r"}})])]):t._e()],2)],1)]),n("detail-ad",{attrs:{type:"news"}}),n("div",{staticClass:"m-box-model m-art-comments"},[n("ul",{staticClass:"m-box m-aln-center m-art-comments-tabs"},[n("li",[t._v(t._s(t._f("formatNum")(t.commentCount))+"条评论")])]),0===t.news.audit_status?[t._l(t.pinnedCom,function(e){return n("comment-item",{key:"pinned-"+e.id,attrs:{comment:e,pinned:!0},on:{click:t.replyComment}})}),t._l(t.comments,function(e){return n("comment-item",{key:"comment-"+e.id,attrs:{comment:e},on:{click:t.replyComment}})}),n("div",{staticClass:"m-box m-aln-center m-justify-center load-more-box"},[t.noMoreCom?n("span",{staticClass:"load-more-ph"},[t._v("---没有更多---")]):n("span",{staticClass:"load-more-btn",on:{click:function(e){e.stopPropagation(),t.fetchNewsComments(t.maxComId)}}},[t._v("\n            "+t._s(t.fetchComing?"加载中...":"点击加载更多")+"\n          ")])])]:t._e()],2)],1)],1)},s=[],r=n("iv4g"),a=(n("f3/d"),n("rGqo"),n("RW0V"),n("yT7P")),o=n("9e9m"),c=n("L2JU"),u=n("YH7M"),l=n("rmEv"),f=n("nlbq"),h=n("Ejg1"),d=n("EDhF"),m=n("TsPW"),p=n("qiqU"),v=function(){},w={name:"NewsDetail",components:{ArticleCard:u["a"],CommentItem:l["a"],DetailAd:f["a"]},data:function(){return{oldID:0,news:{},loading:!0,fetching:!1,likes:[],comments:[],rewardList:[],reward:{count:0,amount:0},pinnedCom:[],fetchComing:!1,noMoreCom:!1,maxComId:0,config:{appid:"",signature:"",timestamp:"",noncestr:""},appList:["onMenuShareQZone","onMenuShareQQ","onMenuShareAppMessage","onMenuShareTimeline"],share:{title:"",desc:"",link:""}}},computed:Object(a["a"])({},Object(c["d"])(["CURRENTUSER"]),{firstImage:function(){var t=this.news.image;return Object.keys(t).length?this.$http.defaults.baseURL+"/files/"+t.id+"?w=300&h=300":""},newsID:function(){return this.$route.params.newsID},userID:function(){return this.news.user_id||0},isMine:function(){return this.news.user_id===this.CURRENTUSER.id},liked:{get:function(){return!!this.news.has_like},set:function(t){this.news.has_like=t}},likeCount:{get:function(){return this.news.digg_count||0},set:function(t){t&&(this.news.digg_count=t)}},commentCount:{get:function(){return this.news.comment_count||0},set:function(t){this.news.comment_count=t}},time:function(){return this.news.created_at||""},cate:function(){var t=this.news.category;t=void 0===t?{}:t;var e=t.name,n=void 0===e?"未分类":e;return n},body:function(){return Object(d["default"])(this.news.content||"")},isWechat:function(){return this.$store.state.BROWSER.isWechat}}),activated:function(){var t=this;this.newsID&&(this.newsID!==this.oldID?this.fetchNews():setTimeout(function(){t.loading=!1},600))},deactivated:function(){this.loading=!0},methods:{shareSuccess:function(){this.$Message.success("分享成功")},shareCancel:function(){this.$Message.success("取消分享")},fetchNews:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;this.fetching||(this.fetching=!0,p["e"](this.newsID).then(function(n){var i=n.data,s=void 0===i?{}:i;if(t.loading=!1,t.fetching=!1,t.news=s,t.oldID=t.newsID,t.share.title=s.title,t.share.desc=s.subject,t.fetchNewsComments(),t.fetchNewsLikes(),t.fetchRewardInfo(),t.fetchRewards(),e(),t.isWechat){var r=window.location.origin+"/plus-small-screen-client/".substr(0,"/plus-small-screen-client/".length-1)+t.$route.fullPath,a="IOS"===t.$store.state.BROWSER.OS?window.initUrl:r;Object(h["a"])(a,{title:s.title,desc:s.subject,link:r,imgUrl:t.firstImage})}}).catch(function(e){console.warn(e),t.$router.back()}))},fetchNewsLikes:function(){var t=this;this.$http.get("/news/".concat(this.newsID,"/likes")).then(function(e){var n=e.data,i=void 0===n?[]:n;i&&i.length,t.likes=i})},fetchNewsComments:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.fetchComing||(this.fetchComing=!0,p["g"](this.newsID,{after:e}).then(function(n){var i=n.data,s=i.pinneds,a=void 0===s?[]:s,o=i.comments,c=void 0===o?[]:o;if(e)t.comments=Object(r["a"])(t.comments).concat(Object(r["a"])(c));else{t.pinnedCom=a;var u=a.map(function(t){return t.id});t.comments=c.filter(function(t){return u.indexOf(t.id)<0})}c.length&&(t.maxComId=c[c.length-1].id),t.noMoreCom=c.lenght!==m["c"],t.fetchComing=!1}).catch(function(){t.fetchComing=!1}))},fetchRewards:function(){var t=this;p["h"](this.newsID,{limit:10}).then(function(e){var n=e.data,i=void 0===n?{}:n;t.rewardList=i})},fetchRewardInfo:function(){var t=this;p["i"](this.newsID).then(function(e){var n=e.data,i=void 0===n?{}:n;t.reward={count:~~i.count||0,amount:~~i.amount||0}})},rewardNews:function(){var t=this,e=function(e){t.fetchRewards(),t.reward.count+=1,t.reward.amount+=e};o["a"].$emit("reward",{type:"news",api:p["k"],payload:this.newsID,callback:e})},likeNews:function(){var t=this,e=this.liked?"delete":"post";this.fetching||(this.fetching=!0,this.$http({method:e,url:"/news/".concat(this.newsID,"/likes"),validateStatus:function(t){return 201===t||204===t}}).then(function(){"post"===e?(t.liked=!0,t.likeCount+=1):(t.liked=!1,t.likeCount-=1),t.fetching=!1}).catch(function(){t.fetching=!1}))},commentNews:function(){var t=this;o["a"].$emit("commentInput",{onOk:function(e){t.sendComment({body:e})}})},shareNews:function(){},moreAction:function(){var t=this,e=[{text:"收藏",method:function(){}}],n=this.isMine?[{text:"申请文章置顶",method:function(){o["a"].$emit("applyTop",{type:"news",api:p["a"],payload:t.newsID})}},{text:"删除",method:function(){t.$Message.info("资讯删除功能开发中，敬请期待")}}]:[{text:"举报",method:function(){t.$Message.info("举报功能开发中，敬请期待")}}];o["a"].$emit("actionSheet",e.concat(n),"取消")},replyComment:function(t,e,n){var i=this;if(t===this.CURRENTUSER.id){var s=t===this.userID,r=[{text:s?"评论置顶":"申请评论置顶",method:function(){o["a"].$emit("applyTop",{isOwner:s,type:"newsComment",api:p["b"],payload:{newsId:i.newsID,commentId:n},callback:i.fetchNewsComments})}},{text:"删除评论",method:function(){return i.deleteComment(n)}}];o["a"].$emit("actionSheet",r,"取消")}else o["a"].$emit("commentInput",{placeholder:"回复： ".concat(e),onOk:function(e){i.sendComment({reply_user:t,body:e})}})},sendComment:function(t){var e=this,n=t.reply_user,i=t.body,s={};i&&i.length>0?(s.body=i,n&&(s["reply_user"]=n),this.$http.post("/news/".concat(this.newsID,"/comments"),s,{validateStatus:function(t){return 201===t}}).then(function(){e.$Message.success("评论成功"),e.fetchNewsComments(),e.commentCount+=1,o["a"].$emit("commentInput:close",!0)}).catch(function(){e.$Message.error("评论失败"),o["a"].$emit("commentInput:close",!0)})):this.$Message.error("评论内容不能为空")},deleteComment:function(t){var e=this;p["c"](this.newsID,t).then(function(){e.fetchNewsComments(),e.commentCount-=1,e.$Message.success("删除评论成功")})},onRefresh:function(){var t=this;this.fetchNews(function(){t.$refs.loadmore.afterRefresh(!0)})}}},g=w,y=(n("vhZN"),n("KHd+")),x=Object(y["a"])(g,i,s,!1,null,"abd14036",null);e["default"]=x.exports},jce9:function(t,e,n){"use strict";var i=n("oamX"),s=n.n(i);s.a},lnwd:function(t,e,n){},oamX:function(t,e,n){},qRd6:function(t,e,n){},sCOZ:function(t,e,n){},vhZN:function(t,e,n){"use strict";var i=n("9GeW"),s=n.n(i);s.a},vmUk:function(t,e,n){"use strict";var i=n("sCOZ"),s=n.n(i);s.a}}]);
//# sourceMappingURL=news-419d67356e10c89a445b.js.map