(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[0],{"1yj7":function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return i}),n.d(e,"c",function(){return o}),n.d(e,"e",function(){return r}),n.d(e,"d",function(){return c});var s=n("TsPW");function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].get("/questions",{params:t,validateStatus:function(t){return 200===t}})}function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15;return a({type:t,limit:n,offset:e})}function o(t){return s["a"].get("/questions/".concat(t),{validateStatus:function(t){return 200===t}})}function r(t){return s["a"].put("/user/question-watches/".concat(t),{},{validateStatus:function(t){return 204===t}})}function c(t){return s["a"].delete("/user/question-watches/".concat(t),{validateStatus:function(t){return 204===t}})}},"3WoM":function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"topic-card"},[n("router-link",{staticClass:"topic-image",attrs:{src:t.topic.avatar,to:"/question-topics/"+t.topic.id,tag:"img"}}),n("router-link",{staticClass:"title",attrs:{to:"/question-topics/"+t.topic.id,tag:"a"}},[n("div",{staticClass:"topic m-text-cut"},[t._v(t._s(t.topic.name))]),n("div",{staticClass:"label"},[n("span",[t._v(t._s(t.topic.follows_count))]),t._v(" 关注\n      ·\n      "),n("span",[t._v(t._s(t.topic.questions_count))]),t._v(" 问题\n    ")])]),t.topic.has_follow||"follow"===t.type?n("button",{staticClass:"follow active",on:{click:function(e){t.handleUnfollow(t.topic)}}},[n("span",[t._v("✓")]),t._v("已关注")]):n("button",{staticClass:"follow",on:{click:function(e){t.handleFollow(t.topic)}}},[n("span",[t._v("+")]),t._v("关注")])],1)},a=[],i={props:{topic:{type:Object,required:!0},type:{type:String,default:"hot"}},methods:{handleUnfollow:function(t){this.$emit("unfollow",t)},handleFollow:function(t){this.$emit("follow",t)}}},o=i,r=(n("vmRq"),n("KHd+")),c=Object(r["a"])(o,s,a,!1,null,"069360c6",null);e["a"]=c.exports},"4ORE":function(t,e,n){"use strict";var s=n("N2Ss"),a=n.n(s);a.a},"6kFN":function(t,e,n){},"6mbv":function(t,e,n){"use strict";var s=n("Z2ex"),a=n.n(s);a.a},"7QHF":function(t,e,n){"use strict";var s=n("sAko"),a=n.n(s);a.a},"9iJl":function(t,e,n){},A4hb:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-question"},[n("switch-bar"),n("router-view")],1)},a=[],i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",{staticClass:"module-question-app-bar"},[n("div",{staticClass:"module-question-app-bar_buttom"},[n("svg",{staticClass:"m-style-svg m-svg-def",on:{click:t.goBack}},[n("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#base-back"}})])]),n("div",{staticClass:"module-question-app-bar_tab"},[n("router-link",{class:t.questionRouteClassName,attrs:{replace:!0,exact:!0,to:"/question"}},[t._v("\n      问答\n    ")]),n("router-link",{class:t.topicsRouteClassName,attrs:{replace:!0,exact:!0,to:"/question/topics"}},[t._v("\n      话题\n    ")])],1),n("div",{staticClass:"module-question-app-bar_buttom module-question-app-bar_buttom-right"},[n("router-link",{attrs:{to:"/question/search"}},[n("svg",{staticClass:"module-question-app-bar_buttom-icon"},[n("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#base-search"}})])])],1)])},o=[],r={name:"QuestionSwitchBar",computed:{routePath:function(){var t=this.$route.path;return t},questionRouteClassName:function(){return["module-question-app-bar_tab-item",{active:this.hasQuestionRouteActive}]},topicsRouteClassName:function(){return["module-question-app-bar_tab-item",{active:this.hasTopicRouteActive}]},hasQuestionRouteActive:function(){return"/question"===this.routePath},hasTopicRouteActive:function(){return"/question/topics"===this.routePath}}},c=r,u=(n("SRCd"),n("KHd+")),l=Object(u["a"])(c,i,o,!1,null,"59d70fc2",null),d=l.exports,f={name:"Questions",components:{SwitchBar:d}},m=f,h=(n("CstJ"),Object(u["a"])(m,s,a,!1,null,"80046bac",null));e["default"]=h.exports},Cm85:function(t,e,n){"use strict";var s=n("nRy8"),a=n.n(s);a.a},CstJ:function(t,e,n){"use strict";var s=n("RuXS"),a=n.n(s);a.a},FyZp:function(t,e,n){},GFpd:function(t,e,n){},"Hme+":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p-question-search"},[n("header",{staticClass:"m-box m-aln-center m-pos-f m-main m-bb1 m-head-top"},[n("div",{staticClass:"m-box m-flex-grow2 m-flex-shrink2 m-aln-center m-head-top-title"},[n("div",{staticClass:"m-search-box"},[n("form",{attrs:{action:"#",onsubmit:"return false"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],attrs:{type:"search",placeholder:"搜索"},domProps:{value:t.keyword},on:{input:[function(e){e.target.composing||(t.keyword=e.target.value)},t.searchQuestions]}})])])]),n("div",{staticClass:"m-box m-flex-grow0 m-flex-shrink0 m-aln-center m-justify-end"},[n("a",{on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.goBack(e)}}},[t._v("取消")])])]),n("nav",{staticClass:"questions-nav"},[n("router-link",{attrs:{to:"/question/search",replace:"",exact:"","exact-active-class":"active"}},[t._v("问题")]),n("router-link",{attrs:{to:{path:"/question/search",query:{type:"topic"}},replace:"",exact:"","exact-active-class":"active"}},[t._v("话题")])],1),n("jo-load-more",{ref:"loadmore",staticStyle:{"padding-top":"1.8rem"},attrs:{"auto-load":!1,"show-bottom":t.list.length>0},on:{onRefresh:t.onRefresh,onLoadMore:t.onLoadMore}},["question"===t.type?t._l(t.list,function(t){return n("question-card",{key:t.id,attrs:{question:t}})}):t._l(t.list,function(t){return n("topic-card",{key:t.id,attrs:{topic:t}})})],2)],1)},a=[],i=n("iv4g"),o=n("LvDl"),r=n.n(o),c=n("3WoM"),u=n("P9rq"),l=n("1yj7"),d=n("ojMn"),f=n("TsPW"),m=function(){},h={name:"QuestionSearch",components:{TopicCard:c["a"],QuestionCard:u["a"]},data:function(){return{type:"question",keyword:"",offset:0,limit:15,list:[]}},computed:{after:function(){var t=this.list.length;return t>0?this.list[t-1].id:0}},watch:{$route:function(t){this.type=t.query.type||"question",this.list=[],this.offset=0,this.keyword=""}},mounted:function(){this.type=this.$route.query.type||"question"},methods:{searchQuestions:r.a.debounce(function(t,e){this.keyword&&("question"===this.type?this.queryQuestions(e):this.queryTopics(e))},600),queryQuestions:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,n={offset:this.offset,limit:this.limit,subject:this.keyword};Object(l["b"])(n).then(function(n){var s=n.data;0===t.offset?t.list=s:t.list=Object(i["a"])(t.list).concat(Object(i["a"])(s)),e(s.length<f["c"])})},queryTopics:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,n={offset:this.offset,limit:this.limit,name:this.keyword};Object(d["d"])(n).then(function(n){var s=n.data;0===t.offset?t.list=s:t.list=Object(i["a"])(t.list).concat(Object(i["a"])(s)),e(s.length<f["c"])})},onRefresh:function(t){this.offset=0,this.searchQuestions(null,t)},onLoadMore:function(t){this.offset=this.list.length,this.searchQuestions(null,t)}}},v=h,p=(n("7QHF"),n("LcnV"),n("KHd+")),w=Object(p["a"])(v,s,a,!1,null,"e1c04598",null);e["default"]=w.exports},JlbT:function(t,e,n){"use strict";var s=n("Yrpz"),a=n.n(s);a.a},LcnV:function(t,e,n){"use strict";var s=n("mKmO"),a=n.n(s);a.a},MDXx:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("avatar",t._b({nativeOn:{click:function(e){return t.handleClick(e)}}},"avatar",t.$props,!1),[t.anonymity?[t._v("匿")]:t.src?n("img",{attrs:{src:t.src}}):n("svg",{staticClass:"avatar_icon",attrs:{width:"100%",height:"100%"}},[n("use",{attrs:{"xlink:href":t.defaultAvatar,"xmlns:xlink":"http://www.w3.org/1999/xlink"}})])],2)},a=[],i=(n("xfY5"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._b({class:t.rootClassName,style:t.rootStyles,on:{click:t.handleClick}},"div",t.$props,!1),[t._t("default")],2)}),o=[],r=n("iv4g"),c={name:"Avatar",props:{classes:{type:[Array,String],default:""},size:{type:[String,Number],default:.4},sizeUnit:{type:String,default:"rem"}},computed:{rootClassName:function(){var t=this.classes||[];return("string"===typeof t||t instanceof String)&&(t=[t]),["module-avatar"].concat(Object(r["a"])(t))},rootStyles:function(){var t=this.size;return("number"===typeof t||t instanceof Number)&&(t+=this.sizeUnit),{width:t,height:t}}},methods:{handleClick:function(t){this.$emit("click",t)}}},u=c,l=(n("c+Nx"),n("KHd+")),d=Object(l["a"])(u,i,o,!1,null,null,null),f=d.exports,m={name:"UserAvatar",components:{Avatar:f},props:{src:{type:String,default:""},sex:{type:Number,default:0},anonymity:{type:Boolean,default:!1},classes:{type:[Array,String],default:""},size:{type:[String,Number],default:.4},sizeUnit:{type:String,default:"rem"}},computed:{defaultAvatar:function(){switch(this.sex){case 1:return"#avatar-man";case 2:return"#avatar-woman";case 0:default:return"#avatar-secret"}}},methods:{handleClick:function(t){this.$emit("click",t)}}},h=m,v=Object(l["a"])(h,s,a,!1,null,null,null);e["a"]=v.exports},N2Ss:function(t,e,n){},OIff:function(t,e,n){"use strict";var s=n("jQl8"),a=n.n(s);a.a},P9rq:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"module-question-list-item"},[n("router-link",{staticClass:"module-question-list-item_title",attrs:{to:"/questions/"+t.question.id,tag:"h3"}},[t._v("\n    "+t._s(t.question.subject)+"\n    "),n("span",{directives:[{name:"show",rawName:"v-show",value:t.question.excellent,expression:"question.excellent"}],staticClass:"module-question-list-item-shang-i"},[t._v("精")])]),t.firstImageStyle?n("router-link",{staticClass:"module-question-list-item_image",style:t.firstImageStyle,attrs:{to:"/questions/"+t.question.id,tag:"div"}}):t._e(),n("question-list-answer-card",{attrs:{answer:t.answer}}),n("router-link",{staticClass:"module-question-list-item_button",attrs:{to:"/questions/"+t.question.id,tag:"div"}},[n("span",[n("span",{staticClass:"module-question-list-item_button-style1"},[t._v(t._s(t.question.watchers_count))]),t._v(" 关注\n    ")]),n("span",[n("span",[t._v("·")]),n("span",{staticClass:"module-question-list-item_button-style1"},[t._v(t._s(t.question.answers_count))]),t._v(" 回答\n    ")]),n("span",{directives:[{name:"show",rawName:"v-show",value:t.question.amount,expression:"question.amount"}]},[n("span",[t._v("·")]),n("span",{staticClass:"module-question-list-item-shang"},[n("span",[t._v("赏")]),t._v("\n        "+t._s(t.question.amount)+"\n      ")])]),n("span",{staticClass:"module-question-list-item_button-time"},[t._v(t._s(t._f("time2tips")(t.question.updated_at)))])])],1)},a=[],i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.answer?n("div",{staticClass:"module-question-list-answer-card"},[n("user-avatar",{attrs:{anonymity:t.anonymity,src:t.user.avatar,sex:t.user.sex}}),t._v("\n  "+t._s(t.showUsername)+"："+t._s(t.body)+"\n")],1):n("div",{staticClass:"module-question-list-answer-card-empty"})},o=[],r=(n("f3/d"),n("a94B")),c=n("MDXx"),u=n("EDhF"),l={name:"QuestionListAnswerCard",components:{UserAvatar:c["a"]},props:{answer:{type:[Object],default:null,validator:function(t){return!t||"object"===Object(r["a"])(t)}}},computed:{anonymity:function(){var t=this.answer.anonymity;return!!t},user:function(){var t=this.answer.user;return t||{}},showUsername:function(){return this.anonymity?"匿名用户":this.user.name},body:function(){var t=this.answer.body;return Object(u["syntaxTextAndImage"])(t||"").text}}},d=l,f=(n("rgEf"),n("KHd+")),m=Object(f["a"])(d,i,o,!1,null,null,null),h=m.exports,v={name:"QuestionCard",components:{QuestionListAnswerCard:h},props:{question:{type:Object,required:!0}},computed:{answer:function(){var t=this.question.answer;return t},body:function(){return Object(u["syntaxTextAndImage"])(this.question.body)},firstImageStyle:function(){var t=this.body.images,e=t.pop();return!!e&&"background-image: url(".concat(e,")")}}},p=v,w=(n("OIff"),Object(f["a"])(p,s,a,!1,null,null,null));e["a"]=w.exports},RuXS:function(t,e,n){},SRCd:function(t,e,n){"use strict";var s=n("9iJl"),a=n.n(s);a.a},WfNL:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p-question-detail"},[n("header",{staticClass:"m-box m-pos-f m-main m-bb1 m-head-top"},[n("div",{staticClass:"m-box m-aln-center m-flex-grow1 m-flex-base0"},[n("svg",{staticClass:"m-style-svg m-svg-def",on:{click:t.goBack}},[n("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#base-back"}})])]),t._m(0),n("div",{staticClass:"m-box m-aln-center m-flex-grow1 m-flex-base0"})]),n("div",{staticClass:"container"},[n("load-more",{ref:"questionLoadContainer",attrs:{"on-refresh":t.handleRefreshAnswers,"on-load-more":t.handleLoadMoreAnswers}},[n("div",{staticClass:"main"},[n("div",{staticClass:"main-topics"},t._l(t.topics,function(e){return n("router-link",{key:e.id,staticClass:"label",attrs:{to:"/question-topics/"+e.id}},[t._v("\n            "+t._s(e.name)+"\n          ")])})),n("h3",{staticClass:"main-title"},[t._v(t._s(t.question.subject))]),n("div",{staticClass:"markdown-body main-body",domProps:{innerHTML:t._s(t.htmlBody)}}),n("div",{staticClass:"main-watch"},[n("div",{staticClass:"main-watch-count"},[n("span",{staticClass:"follow-count"},[t._v(t._s(t.question.watchers_count)+" 关注")]),n("span",{directives:[{name:"show",rawName:"v-show",value:t.question.amount,expression:"question.amount"}]},[n("span",[t._v("·")]),n("span",{staticClass:"shang"},[n("span",[t._v("赏")]),t._v("\n                "+t._s(t.question.amount)+"\n              ")])])]),t.question.watched?n("button",{staticClass:"main-watch-follow active",on:{click:t.handleUnwatch}},[n("span",[t._v("✓")]),t._v("已关注\n          ")]):n("button",{staticClass:"main-watch-follow",on:{click:t.handleWatch}},[n("span",[t._v("+")]),t._v("关注\n          ")])]),n("div",{staticClass:"main-button"},[n("div",{staticClass:"button"},[n("svg",{staticClass:"main-button-icon",attrs:{fill:"#666"}},[n("use",{attrs:{"xlink:href":"#base-reward"}})]),t._v("\n            "+t._s(t.question.amount?"已":"未")+"设置悬赏\n          ")]),n("span"),n("div",{staticClass:"button"},[n("svg",{staticClass:"main-button-icon",attrs:{fill:"#666"}},[n("use",{attrs:{"xlink:href":"#base-edit"}})]),t._v("\n            添加回答\n          ")])])]),n("div",{staticClass:"answers-tool"},[n("div",[t._v(t._s(t.question.answers_count)+"个回答")]),n("button",{on:{click:t.handleTargetAnswersOrder}},[t._v("\n          "+t._s(t.answersTimeOrder?"时间排序":"默认排序")+"\n          "),n("svg",{staticClass:"icon",attrs:{fill:"#999"}},[n("use",{attrs:{"xlink:href":"#base-filter-list"}})])])]),t._l(t.answers,function(t){return n("question-answer-item",{key:t.id,attrs:{answer:t}})})],2)],1),n("div",{staticClass:"tabbar"},[n("a",{staticClass:"tabbar-item",attrs:{href:"#"}},[n("svg",{staticClass:"tabbar-icon",attrs:{fill:"#999"}},[n("use",{attrs:{"xlink:href":"#message-comments"}})]),t._v("\n      评论\n    ")]),n("a",{staticClass:"tabbar-item",attrs:{href:"#"}},[n("svg",{staticClass:"tabbar-icon",attrs:{fill:"#999"}},[n("use",{attrs:{"xlink:href":"#base-share"}})]),t._v("\n      分享\n    ")]),n("a",{directives:[{name:"show",rawName:"v-show",value:t.editer,expression:"editer"}],staticClass:"tabbar-item",attrs:{href:"#"}},[n("svg",{staticClass:"tabbar-icon",attrs:{fill:"#999"}},[n("use",{attrs:{"xlink:href":"#edit"}})]),t._v("\n      编辑\n    ")]),n("a",{staticClass:"tabbar-item",attrs:{href:"#"}},[n("svg",{staticClass:"tabbar-icon",attrs:{fill:"#999"}},[n("use",{attrs:{"xlink:href":"#base-more"}})]),t._v("\n      更多\n    ")])])])},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"m-box m-aln-center m-flex-grow1 m-flex-base0 m-justify-center m-head-top-title"},[n("span",[t._v("问题详情")])])}],i=n("iv4g"),o=n("EDhF"),r=n("1yj7"),c=n("ysTb"),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"question-answer-item",on:{click:t.viewDetail}},[n("div",{staticClass:"avatar",on:{click:function(e){return e.stopPropagation(),t.viewUser(e)}}},[n("user-avatar",{attrs:{size:.56,anonymity:t.anonymity,src:t.user.avatar,sex:t.user.sex}})],1),n("div",{staticClass:"main"},[n("h3",{staticClass:"main-header"},[[t._v(t._s(t.anonymity?"匿名用户":t.user.name))],n("span",[t._v(t._s(t._f("time2tips")(t.answer.created_at)))])],2),n("div",{staticClass:"main-body"},[t._v(t._s(t._f("markdownText")(t.answer.body)))]),n("div",{staticClass:"main-button"},[n("button",{on:{click:function(e){return e.stopPropagation(),t.handleLikeTarget(e)}}},[n("svg",{staticClass:"icon"},[n("use",{attrs:{"xlink:href":t.answer.liked?"#feed-like":"#feed-unlike"}})]),t._v("\n        "+t._s(t._f("formatNum")(t.answer.likes_count))+"\n      ")]),n("span",[n("svg",{staticClass:"icon"},[n("use",{attrs:{"xlink:href":"#message-comments"}})]),t._v("\n        "+t._s(t._f("formatNum")(t.answer.comments_count))+"\n      ")])])])])},l=[],d=n("MDXx"),f={name:"QuestionAnswerItem",components:{UserAvatar:d["a"]},props:{answer:{type:Object,required:!0}},data:function(){return{likeTargetHanding:!1}},computed:{anonymity:function(){var t=this.answer.anonymity;return!!t},user:function(){var t=this.answer.user,e=void 0===t?{}:t;return e}},methods:{handleLike:function(){var t=this;Object(c["c"])(this.answer.id).then(function(){t.likeTargetHanding=!1,t.answer.liked=!0,t.answer.likes_count+=1}).catch(function(e){var n=e.response;n=void 0===n?{}:n;var s=n.data;t.likeTargetHanding=!1,t.$Message.error(s)})},handleUnlike:function(){var t=this;Object(c["h"])(this.answer.id).then(function(){t.likeTargetHanding=!1,t.answer.liked=!1,t.answer.likes_count-=1}).catch(function(e){var n=e.response;n=void 0===n?{}:n;var s=n.data;t.likeTargetHanding=!1,t.$Message.error(s)})},handleLikeTarget:function(){this.likeTargetHanding?this.$Message.warning("正在执行，请勿重复点击!"):this.answer.liked?this.handleUnlike():this.handleLike()},viewDetail:function(){this.$router.push("/questions/".concat(this.answer.question_id,"/answers/").concat(this.answer.id))},viewUser:function(){this.user.id&&this.$router.push("/users/".concat(this.user.id))}}},m=f,h=(n("l529"),n("KHd+")),v=Object(h["a"])(m,u,l,!1,null,"1332a8ff",null),p=v.exports,w={name:"QuestionDetail",components:{QuestionAnswerItem:p},data:function(){return{question:{},answersTimeOrder:!1,answers:[]}},computed:{logedUser:function(){var t=this.$store.state.CURRENTUSER;return t},editer:function(){return!1},topics:function(){var t=this.question.topics,e=void 0===t?[]:t;return e},htmlBody:function(){var t=this.question.body,e=void 0===t?"":t;return Object(o["render"])(e)},loadContainer:function(){return this.$refs.questionLoadContainer},answerRequestMethod:function(){return this.answersTimeOrder?c["f"]:c["e"]}},watch:{answersTimeOrder:function(t,e){t.path===e.path&&(this.answers=[],this.loadContainer.beforeRefresh())}},mounted:function(){this.loadContainer.beforeRefresh()},methods:{fetch:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object(r["c"])(this.$route.params.id).then(function(n){var s=n.data;t.question=s,e instanceof Function&&e()}).catch(function(e){var n=e.response;n=void 0===n?{}:n;var s=n.data;t.loadContainer.topEnd(!1),t.loadContainer.bottomEnd(!0),t.$Message.error(s)})},refreshAnswer:function(){var t=this;this.answerRequestMethod(this.$route.params.id).then(function(e){var n=e.data;t.loadContainer.topEnd(!1),t.loadContainer.bottomEnd(n.length<15),t.answers=n}).catch(function(e){var n=e.response;n=void 0===n?{}:n;var s=n.data;t.loadContainer.topEnd(!1),t.loadContainer.bottomEnd(!0),t.$Message.error(s)})},handleRefreshAnswers:function(){this.fetch(this.refreshAnswer)},handleTargetAnswersOrder:function(){this.answersTimeOrder=!this.answersTimeOrder},handleWatch:function(){var t=this;Object(r["e"])(this.$route.params.id).then(function(){t.question.watched=!0,t.question.watchers_count+=1}).catch(function(e){var n=e.response;n=void 0===n?{}:n;var s=n.data;t.$Message.error(s)})},handleUnwatch:function(){var t=this;Object(r["d"])(this.$route.params.id).then(function(){t.question.watched=!1,t.question.watchers_count-=1}).catch(function(e){var n=e.response;n=void 0===n?{}:n;var s=n.data;t.$Message.error(s)})},handleLoadMoreAnswers:function(){var t=this;this.answers.length&&this.answerRequestMethod(this.$route.params.id,this.answers.length).then(function(e){var n=e.data;t.loadContainer.bottomEnd(n.length<15),t.answers=Object(i["a"])(t.answers).concat(Object(i["a"])(n))}).catch(function(e){var n=e.response;n=void 0===n?{}:n;var s=n.data;t.loadContainer.bottomEnd(!0),t.$Message.error(s)})}}},b=w,g=(n("4ORE"),Object(h["a"])(b,s,a,!1,null,"f737879c",null));e["default"]=g.exports},Yrpz:function(t,e,n){},Z2ex:function(t,e,n){},ZK8a:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p-topic-detail"},[n("header",{staticClass:"m-box m-pos-f m-main m-head-top m-bb1"},[n("div",{staticClass:"m-box m-aln-center m-flex-none"},[n("svg",{staticClass:"m-style-svg m-svg-def",on:{click:t.goBack}},[n("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#base-back"}})])]),n("div",{staticClass:"m-box m-aln-center m-justify-center m-flex-auto m-head-top-title"},[n("span",{staticClass:"m-text-cut"},[t._v(t._s(t.topic.name||"话题详情"))])]),n("div",{staticClass:"m-box m-aln-center m-justify-end m-flex-none"},[n("svg",{staticClass:"m-style-svg m-svg-def"},[n("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#base-share"}})])])]),n("main",{staticStyle:{"padding-top":"0.9rem"}},[n("div",{staticClass:"topic"},[n("img",{attrs:{src:"https://images.zhibocloud.cn/question/topics/000/000/000/02.png"}}),n("div",{staticClass:"title"},[n("h3",{staticClass:"topic-name m-text-cut"},[t._v(t._s(t.topic.name))]),n("div",{staticClass:"label"},[n("span",[t._v(t._s(t.topic.follows_count))]),t._v(" 关注\n          ·\n          "),n("span",[t._v(t._s(t.topic.questions_count))]),t._v(" 问题\n        ")])]),t.topic.has_follow?n("button",{staticClass:"follow active",on:{click:function(e){t.handleUnfollow(t.topic)}}},[n("span",[t._v("✓")]),t._v("已关注\n      ")]):n("button",{staticClass:"follow",on:{click:function(e){t.handleFollow(t.topic)}}},[n("span",[t._v("+")]),t._v("关注\n      ")])]),n("div",{staticClass:"topic-desc"},[t._v("\n      话题简介："+t._s(t.topic.description)+"\n    ")]),n("div",{staticClass:"experts"},[n("span",[t._v(t._s(t.topic.experts_count)+"位相关专家")]),n("div",t._l(t.topic.experts,function(e,s){return n("user-avatar",{key:e.id,staticClass:"experts-user",style:[{zIndex:t.topic.experts.length-s}],attrs:{size:.5,src:e.avatar,sex:e.sex}})}))]),n("nav",{ref:"types",staticClass:"types"},[n("router-link",{attrs:{to:{path:"/question-topics/"+t.id},replace:"",exact:"","exact-active-class":"active"}},[t._v("热门")]),n("router-link",{attrs:{to:{path:"/question-topics/"+t.id,query:{type:"excellent"}},replace:"",exact:"","exact-active-class":"active"}},[t._v("精选")]),n("router-link",{attrs:{to:{path:"/question-topics/"+t.id,query:{type:"reward"}},replace:"",exact:"","exact-active-class":"active"}},[t._v("悬赏")]),n("router-link",{attrs:{to:{path:"/question-topics/"+t.id,query:{type:"new"}},replace:"",exact:"","exact-active-class":"active"}},[t._v("最新")]),n("router-link",{attrs:{to:{path:"/question-topics/"+t.id,query:{type:"all"}},replace:"",exact:"","exact-active-class":"active"}},[t._v("全部")])],1),n("load-more",{ref:"load",staticClass:"questions",attrs:{"on-refresh":t.handleRefresh,"on-load-more":t.handleLoadQuestions}},t._l(t.questions,function(t){return n("question-card",{key:t.id,attrs:{question:t}})}))],1)])},a=[],i=(n("rGqo"),n("iv4g")),o=n("MDXx"),r=n("P9rq"),c=n("ojMn"),u={name:"TopicDetail",components:{UserAvatar:o["a"],QuestionCard:r["a"]},data:function(){return{topic:{},loading:!0,questions:[],typeNavOffsetTop:0}},computed:{id:function(){return this.$route.params.id},type:function(){var t=this.$route.query.type,e=void 0===t?"hot":t;return e},loadContainer:function(){return this.$refs.load}},watch:{$route:function(t,e){t.path===e.path&&t.query.type!==e.query.type&&(this.questions=[],this.loadContainer.beforeRefresh())}},mounted:function(){this.typeNavOffsetTop=this.$refs.types.offsetTop,document.addEventListener("scroll",this.handleScrolling)},methods:{handleRefresh:function(){var t=this;c["f"](this.id).then(function(e){var n=e.data;t.loading=!1,t.topic=n,t.handleRefreshQuestions()}).catch(function(e){var n=e.response;n=void 0===n?{}:n;var s=n.data;t.loading=!0,t.loadContainer.topEnd(!1),t.loadContainer.bottomEnd(!0),t.$Message.error(s)})},handleRefreshQuestions:function(){var t=this,e=0,n=15;c["e"](this.id,this.type,e,n).then(function(e){var s=e.data;t.questions=s,t.loadContainer.topEnd(!1),t.loadContainer.bottomEnd(s.length<n)}).catch(function(e){var n=e.response;n=void 0===n?{}:n;var s=n.data;t.loadContainer.topEnd(!1),t.loadContainer.bottomEnd(!0),t.$Message.error(s)})},handleLoadQuestions:function(){var t=this,e=this.questions.length,n=15;c["e"](this.id,this.type,e,n).then(function(e){var s=e.data;t.questions=Object(i["a"])(t.questions).concat(Object(i["a"])(s)),t.loadContainer.bottomEnd(s.length<n)}).catch(function(e){var n=e.response;n=void 0===n?{}:n;var s=n.data;t.loadContainer.bottomEnd(!0),t.$Message.error(s)})},handleScrolling:function(){},handleFollow:function(t){var e=this;c["b"](t.id).then(function(){t.has_follow=!0,e.follows_count+=1}).catch(function(t){var n=t.response;n=void 0===n?{}:n;var s=n.data;e.$Message.error(s)})},handleUnfollow:function(t){var e=this;c["g"](t.id).then(function(){if(t.has_follow=!1,t.follows_count-=1,"follow"===e.type){var n=[];e.topics.forEach(function(e){e.id!==t.id&&n.push(e)}),e.topics=n}}).catch(function(t){var n=t.response;n=void 0===n?{}:n;var s=n.data;e.$Message.error(s)})}}},l=u,d=(n("6mbv"),n("KHd+")),f=Object(d["a"])(l,s,a,!1,null,"713b8c5a",null);e["default"]=f.exports},"c+Nx":function(t,e,n){"use strict";var s=n("FyZp"),a=n.n(s);a.a},id9Z:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"module-questions-topics"},[n("nav",{staticClass:"module-questions-topics-nav"},[n("router-link",{attrs:{to:"/question/topics",replace:"",exact:"","exact-active-class":"active"}},[t._v("全部话题")]),n("router-link",{attrs:{to:{path:"/question/topics",query:{type:"follow"}},replace:"",exact:"","exact-active-class":"active"}},[t._v("我关注的")])],1),n("load-more",{ref:"LoadQuestionTopicsContainer",attrs:{"on-refresh":t.handleRefresh,"on-load-more":t.handleLoadMore}},t._l(t.topics,function(e){return n("topic-card",{key:e.id,attrs:{topic:e,type:t.type},on:{follow:t.handleFollow,unfollow:t.handleUnfollow}})}))],1)},a=[],i=(n("rGqo"),n("iv4g")),o=n("3WoM"),r=n("ojMn"),c={name:"TopicList",components:{TopicCard:o["a"]},data:function(){return{topics:[]}},computed:{type:function(){var t=this.$route.query.type,e=void 0===t?"hot":t;return e},loadContainer:function(){return this.$refs.LoadQuestionTopicsContainer},user:function(){var t=this.$store.state.CURRENTUSER;return t}},watch:{type:function(){this.topics=[],this.loadContainer.beforeRefresh()}},mounted:function(){this.loadContainer.beforeRefresh()},methods:{handleRefresh:function(){"follow"!==this.type?this.handleRefreshByAll():this.handleRefreshByFollow()},handleRefreshByAll:function(){var t=this,e=0,n=15;r["a"](e,n).then(function(e){var s=e.data;t.topics=s,t.loadContainer.topEnd(!1),t.loadContainer.bottomEnd(s.length<n)}).catch(function(e){var n=e.response;n=void 0===n?{}:n;var s=n.data;t.$Message.error(s),t.loadContainer.topEnd(!1),t.loadContainer.bottomEnd(!0)})},handleRefreshByFollow:function(){var t=this,e=0,n=15;r["c"](e,n).then(function(e){var s=e.data;t.topics=s,t.loadContainer.topEnd(!1),t.loadContainer.bottomEnd(s.length<n)}).catch(function(e){var n=e.response;n=void 0===n?{}:n;var s=n.data;t.$Message.error(s),t.loadContainer.topEnd(!1),t.loadContainer.bottomEnd(!0)})},handleLoadMore:function(){"follow"!==this.type?this.handleLoadMoreByAll():this.handleLoadMoreByFollow()},handleLoadMoreByAll:function(){var t=this,e=this.topics.length,n=15;r["a"](e,n).then(function(e){var s=e.data;t.topics=Object(i["a"])(t.topics).concat(Object(i["a"])(s)),t.loadContainer.bottomEnd(s.length<n)}).catch(function(e){var n=e.response;n=void 0===n?{}:n;var s=n.data;t.loadContainer.bottomEnd(!0),t.$Message.error(s)})},handleLoadMoreByFollow:function(){var t=this,e=this.topisc[this.topics.length].id,n=15;r["c"](e,n).then(function(e){var s=e.data;t.topics=Object(i["a"])(t.topics).concat(Object(i["a"])(s)),t.loadContainer.bottomEnd(s.length<n)}).catch(function(e){var n=e.response;n=void 0===n?{}:n;var s=n.data;t.loadContainer.bottomEnd(!0),t.$Message.error(s)})},handleFollow:function(t){var e=this;r["b"](t.id).then(function(){t.has_follow=!0,e.follows_count+=1})},handleUnfollow:function(t){var e=this;r["g"](t.id).then(function(){if(t.has_follow=!1,t.follows_count-=1,"follow"===e.type){var n=[];e.topics.forEach(function(e){e.id!==t.id&&n.push(e)}),e.topics=n}}).catch(function(t){var n=t.response;n=void 0===n?{}:n;var s=n.data;e.$Message.error(s)})}}},u=c,l=(n("Cm85"),n("KHd+")),d=Object(l["a"])(u,s,a,!1,null,null,null);e["default"]=d.exports},it7c:function(t,e,n){},jQl8:function(t,e,n){},l529:function(t,e,n){"use strict";var s=n("GFpd"),a=n.n(s);a.a},mKmO:function(t,e,n){},nRy8:function(t,e,n){},ojMn:function(t,e,n){"use strict";n.d(e,"d",function(){return a}),n.d(e,"a",function(){return i}),n.d(e,"c",function(){return r}),n.d(e,"b",function(){return c}),n.d(e,"g",function(){return u}),n.d(e,"f",function(){return l}),n.d(e,"e",function(){return d});var s=n("TsPW");function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].get("/question-topics",{params:t,validateStatus:function(t){return 200===t}})}function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return a({offset:t,limit:e,follow:n})}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["a"].get("/user/question-topics",{params:t,validateStatus:function(t){return 200===t}})}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;return o({after:t,limit:e,type:"follow"})}function c(t){var e="/user/question-topics/".concat(t);return s["a"].put(e,{},{validateStatus:function(t){return 201===t}})}function u(t){return s["a"].delete("/user/question-topics/".concat(t),{validateStatus:function(t){return 204===t}})}function l(t){return s["a"].get("/question-topics/".concat(t),{validateStatus:function(t){return 200===t}})}function d(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:15;return s["a"].get("/question-topics/".concat(t,"/questions"),{params:{type:e,offset:n,limit:a},validateStatus:function(t){return 200===t}})}},rgEf:function(t,e,n){"use strict";var s=n("6kFN"),a=n.n(s);a.a},sAko:function(t,e,n){},vmRq:function(t,e,n){"use strict";var s=n("it7c"),a=n.n(s);a.a},xvQW:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.answer.id?n("article-card",{attrs:{liked:t.liked,loading:t.loading},on:{"on-like":t.likeAnswer,"on-share":t.shareAnswer,"on-more":t.moreAction,"on-comment":t.commentAnswer}},[n("header",{staticClass:"m-box m-justify-bet m-aln-center m-art-head m-main",staticStyle:{padding:"0"},attrs:{slot:"head"},slot:"head"},[n("div",{staticClass:"m-box m-flex-grow1 m-aln-center m-flex-base0"},[n("svg",{staticClass:"m-style-svg m-svg-def",on:{click:t.goBack}},[n("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#base-back"}})])]),n("div",{staticClass:"m-box m-flex-grow2 m-flex-shrink2 m-aln-center m-flex-base0 m-head-top-title m-justify-center"},[n("span",{staticClass:"m-text-cut"},[t._v(t._s(t.answer.question.subject))])]),n("div",{staticClass:"m-box m-flex-grow1 m-aln-center m-flex-base0 m-justify-end"})]),n("main",{staticClass:"m-flex-shrink1 m-flex-grow1 m-art m-main"},[n("div",{staticClass:"m-art-body"},[n("p",{staticClass:"m-text-box",domProps:{innerHTML:t._s(t.formatBody(t.content))}})]),n("div",{staticClass:"m-box m-aln-center m-justify-bet m-art-foot"},[n("div",{staticClass:"m-flex-grow1 m-flex-shrink1 m-box m-aln-center m-art-like-list"},[t.likeCount>0?[n("ul",{staticClass:"m-box m-flex-grow0 m-flex-shrink0"},t._l(t.likes.slice(0,5),function(t,e){var s=t.user;void 0===s&&(s={});var a=t.id;return n("li",{key:a,staticClass:"m-avatar-box tiny",class:"m-avatar-box-"+s.sex,style:{zIndex:5-e}},[n("img",{attrs:{src:s.avatar}})])})),n("span",[t._v(t._s(t._f("formatNum")(t.likeCount))+"人点赞")])]:t._e()],2),n("div",{staticClass:"m-box-model m-aln-end m-art-info"},[n("span",[t._v("发布于"+t._s(t._f("time2tips")(t.time)))]),n("span",[t._v(t._s(t._f("formatNum")(t.viewsCount))+"浏览")])])]),n("div",{staticClass:"m-box-model m-box-center m-box-center-a m-art-reward"},[n("button",{staticClass:"m-art-rew-btn",on:{click:t.rewardAnswer}},[t._v("打 赏")]),n("p",{staticClass:"m-art-rew-label"},[n("a",{attrs:{href:"javascript:;"}},[t._v(t._s(t._f("formatNum")(t.reward.count)))]),t._v("人打赏，共\n        "),n("a",{attrs:{href:"javascript:;"}},[t._v(t._s(~~t.reward.amount))]),t._v("积分\n      ")]),n("router-link",{staticClass:"m-box m-aln-center m-art-rew-list",attrs:{tag:"ul",to:"rewarders",append:""}},[t._l(t.rewardList,function(t){return n("li",{key:t.id,staticClass:"m-flex-grow0 m-flex-shrink0 m-art-rew m-avatar-box tiny",class:"m-avatar-box-"+t.user.sex},[n("img",{attrs:{src:t.user.avatar}})])}),t.rewardList.length>0?n("li",{staticClass:"m-box m-aln-center"},[n("svg",{staticClass:"m-style-svg m-svg-def",staticStyle:{fill:"#bfbfbf"}},[n("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#base-arrow-r"}})])]):t._e()],2)],1)]),n("div",{staticClass:"m-box-model m-art-comments",attrs:{id:"comment_list"}},[n("ul",{staticClass:"m-box m-aln-center m-art-comments-tabs"},[n("li",[t._v(t._s(t._f("formatNum")(t.commentCount))+"条评论")])]),t._l(t.pinnedCom,function(e){return n("comment-item",{key:"pinned-comment-"+e.id,attrs:{pinned:!0,comment:e},on:{click:t.replyComment}})}),t._l(t.comments,function(e){return n("comment-item",{key:e.id,attrs:{comment:e},on:{click:t.replyComment}})}),n("div",{staticClass:"m-box m-aln-center m-justify-center load-more-box"},[t.noMoreCom?n("span",{staticClass:"load-more-ph"},[t._v("---没有更多---")]):n("span",{staticClass:"load-more-btn",on:{click:function(e){e.stopPropagation(),t.fetchAnswerComments(t.maxComId)}}},[t._v("\n        "+t._s(t.fetchComing?"加载中...":"点击加载更多")+"\n      ")])])],2)]):t._e()},a=[],i=n("iv4g"),o=n("yT7P"),r=n("9e9m"),c=n("L2JU"),u=n("1M3H"),l=n.n(u),d=n("Kuks"),f=n.n(d),m=n("YH7M"),h=n("rmEv"),v=n("ysTb"),p={name:"AnswerDetail",components:{ArticleCard:m["a"],CommentItem:h["a"]},data:function(){return{loading:!1,fetching:!1,answer:{},comments:[],pinnedCom:[],rewardList:[],reward:{count:0,amount:0},fetchComing:!1,noMoreCom:!1,maxComId:0}},computed:Object(o["a"])({},Object(c["d"])(["CURRENTUSER"]),{questionId:function(){return this.$route.params.questionId},answerId:function(){return this.$route.params.answerId},user:function(){return this.answer.user},time:function(){return this.answer.created_at||""},liked:{get:function(){return!!this.answer.liked},set:function(t){this.answer.liked=t}},likes:function(){return this.answer.likes||[]},likeCount:{get:function(){return this.answer.likes_count||0},set:function(t){this.answer.likes_count=~~t}},viewsCount:function(){return this.answer.views_count||0},commentCount:{get:function(){return this.answer.comments_count||0},set:function(t){this.answer.comments_count=~~t}},content:function(){var t=this.answer.body,e=void 0===t?"":t;return e}}),created:function(){this.fetchAnswer()},methods:{formatBody:function(t){return l()({html:!0}).use(f.a,"".concat(this.$http.defaults.baseURL,"/files/")).render(t)},likeAnswer:function(){var t=this;this.fetching||(this.fetching=!0,v["d"](this.answerId,this.liked).then(function(){t.liked?(t.liked=!1,t.likeCount-=1,t.answer.likes=t.answer.likes.filter(function(e){return e.user_id!==t.CURRENTUSER.id})):(t.liked=!0,t.likeCount+=1,t.answer.likes.length<5&&(t.answer.likes=Object(i["a"])(t.answer.likes).concat([{user:t.CURRENTUSER,id:+new Date,user_id:t.CURRENTUSER.id}]))),t.fetching=!1}).catch(function(){t.fetching=!1}))},shareAnswer:function(){},commentAnswer:function(){var t=this;r["a"].$emit("commentInput",{onOk:function(e){t.sendComment({body:e})}})},rewardAnswer:function(){var t=this,e=function(e){t.fetchRewards(),t.reward.count+=1,t.reward.amount+=e};r["a"].$emit("reward",{type:"answer",api:v["g"],payload:this.answerId,callback:e})},moreAction:function(){},fetchRewards:function(){var t=this;v["b"](this.answerId,{limit:10}).then(function(e){var n=e.data;t.rewardList=n})},fetchAnswer:function(){var t=this;this.loading||(this.loading=!0,v["a"](this.answerId).then(function(e){var n=e.data;t.answer=n,t.reward.count=n.rewarder_count,t.reward.amount=n.rewards_amount,t.rewardList=n.rewarders,t.fetchAnswerComments(),t.loading=!1}))},fetchAnswerComments:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.fetchComing||(this.fetchComing=!0,this.$http.get("/question-answers/".concat(this.answerId,"/comments"),{params:{limit:15,after:e}}).then(function(n){var s=n.data,a=void 0===s?[]:s;a&&a.length&&(t.comments=e?Object(i["a"])(t.comments).concat(Object(i["a"])(a)):a,t.maxComId=a[a.length-1].id),t.noMoreCom=a.length<15,t.$nextTick(function(){t.fetchComing=!1,t.loading=!1})}).catch(function(e){console.warn(e),t.loading=!1,t.fetchComing=!1}))},replyComment:function(t,e){var n=this;t===this.CURRENTUSER.id?r["a"].$emit("actionSheet",[{text:"删除评论",method:function(){n.$Message.info("评论删除功能开发中，敬请期待")}}],"取消"):r["a"].$emit("commentInput",{placeholder:"回复： ".concat(e),onOk:function(e){n.sendComment({reply_user:t,body:e})}})},sendComment:function(t){var e=this,n=t.reply_user,s=t.body,a={};s&&s.length>0?(a.body=s,n&&(a["reply_user"]=n),this.$http.post("/question-answers/".concat(this.answerId,"/comments"),a,{validateStatus:function(t){return 201===t}}).then(function(t){var n=t.data;n=void 0===n?{comment:{}}:n;var s=n.comment;e.$Message.success("评论成功"),e.comments.unshift(s),e.commentCount+=1,r["a"].$emit("commentInput:close",!0)}).catch(function(){e.$Message.error("评论失败"),r["a"].$emit("commentInput:close",!0)})):this.$Message.error("评论内容不能为空")}}},w=p,b=n("KHd+"),g=Object(b["a"])(w,s,a,!1,null,null,null);e["default"]=g.exports},ysTb:function(t,e,n){"use strict";n.d(e,"e",function(){return a}),n.d(e,"f",function(){return i}),n.d(e,"c",function(){return o}),n.d(e,"h",function(){return r}),n.d(e,"d",function(){return c}),n.d(e,"a",function(){return u}),n.d(e,"g",function(){return l}),n.d(e,"b",function(){return d});var s=n("TsPW");function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15;return s["a"].get("/questions/".concat(t,"/answers"),{params:{offset:e,limit:n,order_type:"default"},validateStatus:function(t){return 200===t}})}function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15;return s["a"].get("/questions/".concat(t,"/answers"),{params:{offset:e,limit:n,order_type:"time"},validateStatus:function(t){return 200===t}})}function o(t){return s["a"].post("/question-answers/".concat(t,"/likes"),{},{validateStatus:function(t){return 201===t}})}function r(t){return s["a"].delete("/question-answers/".concat(t,"/likes"),{validateStatus:function(t){return 204===t}})}function c(t,e){return e?r(t):o(t)}function u(t){var e="/question-answers/".concat(t);return s["a"].get(e,{validateStatus:function(t){return 200===t}})}function l(t,e){var n="/question-answers/".concat(t,"/new-rewards");return s["a"].post(n,e,{validateStatus:function(t){return 200===t}})}function d(t,e){var n="/question-answers/".concat(t,"/rewarders");return s["a"].get(n,{params:e,validateStatus:function(t){return 200===t}})}},ywcv:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"module-questions"},[n("nav",{staticClass:"module-questions-nav"},[n("router-link",{attrs:{to:"/question",replace:"",exact:"","exact-active-class":"active"}},[t._v("热门")]),n("router-link",{attrs:{to:t.navRouterLinkBuilder("excellent"),replace:"",exact:"","exact-active-class":"active"}},[t._v("精选")]),n("router-link",{attrs:{to:t.navRouterLinkBuilder("reward"),replace:"",exact:"","exact-active-class":"active"}},[t._v("悬赏")]),n("router-link",{attrs:{to:t.navRouterLinkBuilder("new"),replace:"",exact:"","exact-active-class":"active"}},[t._v("最新")]),n("router-link",{attrs:{to:t.navRouterLinkBuilder("all"),replace:"",exact:"","exact-active-class":"active"}},[t._v("全部")])],1),n("main",{staticClass:"module-questions-main"},[t.loading?n("div",{staticClass:"main-loading"},[n("icon-loading",{staticClass:"main-loading_icon"})],1):t._e(),t._l(t.questions,function(t){return n("question-card",{key:t.id,attrs:{question:t}})}),t.questions.length&&!t.loadmore?n("div",{staticClass:"main-loadmore"},[n("button",{staticClass:"main-loadmore_button",on:{click:t.fetchQuestionsMore}},[t._v("\n        加载更多\n      ")])]):t.loadmore?n("div",{staticClass:"main-loadmore"},[n("button",{staticClass:"main-loadmore_button active"},[n("icon-loading",{staticClass:"main-loading_icon"})],1)]):t._e()],2)])},a=[],i=n("iv4g"),o=n("cgvo"),r=n.n(o),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",t._b({attrs:{fill:"#59b6d7",width:"120",height:"30",viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg"}},"svg",t.$props,!1),[n("circle",{attrs:{cx:"15",cy:"15",r:"15"}},[n("animate",{attrs:{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}}),n("animate",{attrs:{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"}})]),n("circle",{attrs:{cx:"60",cy:"15",r:"9","fill-opacity":"0.3"}},[n("animate",{attrs:{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}}),n("animate",{attrs:{attributeName:"fill-opacity",from:"0.5",to:"0.5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"}})]),n("circle",{attrs:{cx:"105",cy:"15",r:"15"}},[n("animate",{attrs:{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}}),n("animate",{attrs:{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"}})])])},u=[],l={name:"IconLoading"},d=l,f=n("KHd+"),m=Object(f["a"])(d,c,u,!1,null,null,null),h=m.exports,v=n("P9rq"),p=n("1yj7"),w={name:"QuestionList",components:{QuestionCard:v["a"],IconLoading:h},data:function(){return{questions:[],loading:!1,loadmore:!1}},computed:{type:function(){var t=this.$route.query.type,e=void 0===t?"hot":t;return e}},watch:{$route:function(t,e){(t.path===e.path&&t.query.type!==e.query.type||!e.query.type)&&this.fetchQuestions()}},mounted:function(){this.fetchQuestions()},methods:{navRouterLinkBuilder:function(t){return{path:"/question",query:{type:t}}},fetchQuestions:function(){var t=this;this.loading=!0,this.questions=[],Object(p["a"])(this.type).then(function(e){var n=e.data;t.questions=n,t.loading=!1}).catch(function(e){var n=e.response;n=void 0===n?{}:n;var s=n.data;t.loading=!1,t.$Message.error(r()(s,"加载失败，请刷新重试！"))})},fetchQuestionsMore:function(){var t=this;this.loadmore=!0,Object(p["a"])(this.type,this.questions.length+1).then(function(e){var n=e.data;t.loadmore=!1,n.length?t.questions=Object(i["a"])(t.questions).concat(Object(i["a"])(n)):t.$Message.error("没有更多数据了")}).catch(function(e){var n=e.response;n=void 0===n?{}:n;var s=n.data;t.loadmore=!1,t.$Message.error(r()(s,"加载失败，请刷新重试！"))})}}},b=w,g=(n("JlbT"),Object(f["a"])(b,s,a,!1,null,"21f7ba38",null));e["default"]=g.exports}}]);
//# sourceMappingURL=question-0e15057c0046f278cd6b.js.map